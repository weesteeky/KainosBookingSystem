<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Kainos MAP</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="getData.js"></script>
</head>
  <body>
    <div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom box-shadow">
      <img src="maplogo.png" style="width:10%" class="my-0 mr-md-auto font-weight-normal">
      <nav class="my-2 my-md-0 mr-md-3">
        <a class="p-2 text-dark" href="http://localhost:8000/">Courses</a>
        <a class="p-2 text-dark" href="http://localhost:8000/addcoursepage">Add a course</a>
      </nav>
      <a class="btn btn-outline-primary" href="#">Login</a>
    </div>

    <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
      <h1 class="display-4">Courses</h1>
    </div>

    <div class="container" id="courses">
      <div class="card-deck mb-3 text-center">
        <div class="card mb-4 box-shadow">
      <script>
            getData("courses").then(data =>{
                data = $.parseJSON(data)
                
                const width = 3;
                for(var i = 0; i < data.length; i++){
                    var date = new Date(data[i].Date); 
                    var courseDate =  date.getDay()+"/"+date.getMonth()+"/"+date.getFullYear();
                    document.getElementById("courses").innerHTML += '<div class="card-deck mb-3 text-center"><div class="card mb-4 box-shadow"><div class="card-header"><h4 class="my-0 font-weight-normal">' +
                                                                        data[i].Title+'</h4></div><div class="card-body"><p>'+data[i].Description+'</p><p>'+courseDate+'</p><p>'+data[i].Location+'</p>'+
                                                                        '</div></div></div></div>'                                                
                }
            })
        
          document.getElementById("courses").innerHTML += '</div>'
      </script>
    </div>
  </body>
</html>
